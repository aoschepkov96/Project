Андрей Ощепков

## Документация к 3 блоку (присвоение рейтинговых баллов)
Поскольку ТЗ можно свести к решению задачи встраивания кода в общий проект (предполагаем, что 4 блок написан раньше, 
а значит, вход 4 блока должен быть выходом 3 блока), а также поскольку в 1 и 2 блоке не реализованы функции для 
определения момента дефолта по контракту (они реализованы линейно, их нельзя вызвать и сразу применить), 
то эту логическую часть кода пришлось переписать процедурно. 

Заметка: документацию по всему проекту необходимо читать в уже существующем файле readme.md. Этот файл описывает 
измененную часть кода по 3 части (ao_part_3.py)

## Входные данные
В качестве входных данных используется таблица по платежам (payments), импортированная в БД на предыдущих этапах для 
расчета моментов дефолта и для дальнейшего определения дефолтеров (факт дефолт / не дефолт связываем с ID-шником
заемщика). 

Кроме этого, используются таблицы БД applications (основные характеристики, по которым приводится расчет скоров), а 
также contracts - промежуточная таблица, которая позволяет связать информацию по дефолтам с этими основными 
характеристиками, используя ключевые поля -- ID-шники и номера контрактов.  

## Заметка по использованию показателей WOE, IV
Поскольку в ТЗ, присвоение скоринговых баллов по показателям подразумевается исходя из монотонности показателя WOE, 
то его необходимо верно рассчитать, учитывая разную природу переменных - дискретную и непрерывную (года, например, 
предполагаются непрерывными). Этот показатель адекватен только для дискретных величин, поэтому все непрерывные 
приводим к категориальному виду (5 категорий) исходя из квантилей.

Для этого необходимо переменные income, age, employed_by перевести в разряд категориальных (будем переводить в 5 
категорий). 

Кроме этого, базовая функция (из частей 1 и 2 проекта) изменена в следующем контексте. Поскольку показатели WOE и IV
интересуют нас с точки зрения квантификации (их динамика от наблюдения к наблюдению), а также поскольку они вычисляются 
как логарифмы частного, то чтобы избежать деления на нуль или логарифма от нуля, сделана добавка (x = 0.5). Ссылка на 
идею: http://support.sas.com/documentation/cdl/en/prochp/66704/HTML/default/viewer.htm#prochp_hpbin_details02.htm  

## Ожидаемые выходные данные
В результате выполнения скрипта получаются по формату ровно те же файлы, которые получались на этом же этапе в первой 
версии блока (у А. Калинина). Это сделано для того, чтобы работал 4 блок и весь проект был цельным. 